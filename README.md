<h1 align="center">KickAdvisor</h1>

<div align="justify">
  <p>
    <strong>Kickbase Trading Advisor:</strong> A helper for the fantasy football game <a href="https://www.kickbase.com" target="_blank" rel="noopener">Kickbase</a>, designed to assist you in making the best trading decisions. The tool estimates other managers' budgets, predicts future player market values, and sends this information to you daily via email. More features and improvements are planned. This project uses the community <a href="https://kevinskyba.github.io/kickbase-api-doc/index.html" target="_blank" rel="noopener">Kickbase API</a> by <a href="https://github.com/kevinskyba" target="_blank" rel="noopener">kevinskyba</a>, big shoutout!
  </p>
</div>

<h2 align="center">Features</h2>
<div align="justify">
  <ol>
    <li>
      <strong>Manager Budget Calculation:</strong> Based on the activity log in each Kickbase league and the points-to-money reward for each matchday, the tool estimates each manager's current budget. Since there is no access to other players' login bonuses or achievements, your own are used for the estimation. While not perfect, this approach still provides a practical and reasonably accurate estimate.
    </li>
    <li>
      <strong>Market Value Prediction:</strong> Using selected features such as points, minutes played, current market value, recent value changes, and more, a machine learning model predicts market value changes for the following day. This is done for all players currently on the market as well as those in your squad.
    </li>
    <li>
      <strong>Email Notifier:</strong> The results from the previous features are sent to you via email daily around 23:00 (+-45 minutes), always after the market value updates around 22:00. You can also run this manually at any time without waiting for the scheduled execution.
    </li>
    <li>
      <strong>More Features in the Future:</strong> ...
    </li>
  </ol>
</div>

<h2 align="center">How Can You Use It?</h2>

<div align="justify">
  <ol>
    <li><strong>Fork the Repository:</strong> Click the "Fork" button to create a copy of this repository in your account.</li>
    <li>
      <strong>Set Your Variables:</strong> In the file <code>daily_predictions.py</code>, set the following variables:
      <ul>
        <li><code>competition_ids</code>: The league you are playing in. The default value is 1, which corresponds to the first German Bundesliga.</li>
        <li><code>league_name</code>: The name of your league. This must exactly match the name of your league, including spaces and capitalization. If you have special symbols (such as emojis), please use UTF encoding. If the league name you entered does not correspond to any league you are currently in, the tool automatically selects the first league in your account. So, if you are only part of one league, you can leave this empty.</li>
        <li><code>start_budget</code>: The budget you started your league with. The default value is 50,000,000. This is needed to calculate the budgets of the managers in your league.</li>
        <li><code>league_start_date</code>: The date you started your Kickbase league. This is needed to retrieve all activities of all managers this season in order to calculate their budgets.</li>
      </ul>
    </li>
    <li>
      <strong>Add Your Secrets:</strong> In your fork, add the following secrets:
      <ul>
        <li><code>KICK_USER</code>: Your Kickbase Username (usually your email)</li>
        <li><code>KICK_PASS</code>: Your Kickbase Password (handled securely)</li>
        <li><code>EMAIL_USER</code>: Your Gmail Address (for sending and receiving emails)</li>
        <li><code>EMAIL_PASS</code>: Password for your Gmail account (usually an app password)
          <ul>
            <li>The email notifier currently only works with Gmail. If you use another email provider, you can leave <code>EMAIL_USER</code> and <code>EMAIL_PASS</code> empty; the results will still be displayed in the Actions log. See the section <em>"Test Your Setup"</em> below for more details.</li>
            <li>An app password is a special password generated by your email provider for third-party apps. You usually need it if your email uses two-factor authentication. Check your email account settings under "Security" or "App Passwords" to see if you need one. <a href="https://support.google.com/mail/answer/185833?hl=en" rel="noopener">Here</a> is how Google handles this.</li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <strong>Test Your Setup:</strong> Go to the "Actions" tab in your fork. Click "Run Daily Predictions" and then "Run Workflow." It should take at most about 2 minutes. If everything works, the workflow will show a green check mark. You can then click on the workflow, select "run-daily-predictions," and click "Run daily_predictions.py." There, you should see the results and, if email is set up, you may also receive an email with the results. If the workflow shows a red cross, something went wrong. To check this, follow the same steps to view the results; you should find an error message indicating what went wrong. Most of the time, this is caused by wrong or missing variables and/or secrets. Once everything works, the tool will run automatically every day between approximately 22:30 and 23:30. The scheduled time can also be changed in the <code>actions.yml</code> file.
    </li>
  </ol>
</div>

<div align="justify">
  <strong>Other Use Case Options:</strong> The tool can be used without the email notifier. Just leave out the secrets, and the results will still be displayed in the GitHub Action execution log. As described in the fourth step "Test Your Setup," you can also always execute the workflow manually and are not bound to the scheduled time. The tool can also be used locally without GitHub Actions: for this, you need to have Python installed along with the packages listed in <code>requirements.txt</code>. Create a <code>.env</code> file in the root folder with the same credentials you used in your secrets. You can then execute the main file <code>daily_predictions.py</code>. If you have any further questions or encounter issues, please use the "Issues" tab at the top of the repository or contact me via the email listed on my GitHub profile.
</div>

<h2 align="center">Future Work & Ideas</h2>
<ul>
  <li>Three-day and one-week market predictions</li>
  <li>Overpay calculator, based on budget and more</li>
  <li>Improve the notifier; using email is not optimal</li>
</ul>
